version: "3.1"
rules:
  - rule: Ask the user to rephrase whenever they send a message with low NLU confidence
    steps:
      - intent: nlu_fallback
      - action: utter_please_rephrase

  - rule: thanks
    steps:
      - intent: thanks
      - action: utter_thanks

  - rule: goodbye
    steps:
      - intent: goodbye
      - action: utter_goodbye

  - rule: get name
    steps:
      - intent: get_name
      - action: action_name

  - rule: active email form
    steps:
      - intent: ask_register_account
      - action: email_form
      - active_loop: email_form

  - rule: update email form
    steps:
      - intent: ask_update_account
      - action: action_reset_email
      - action: email_form
      - active_loop: email_form

  - rule: submit form
    condition:
      - active_loop: email_form
    steps:
      - action: email_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: submit_email_form
